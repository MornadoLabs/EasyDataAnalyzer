import 'jquery';
var EasyDataAnalyzer;
(function (EasyDataAnalyzer) {
    var Import;
    (function (Import) {
        class ImportHistoryService {
            constructor() {
                this.ElementIDs = {
                    ImportsCount: "Imports_Count",
                    DataTable: "importHistoryDataTable",
                    ImportIdCell: "import",
                    FileNameCell: "fileName",
                    RecordsCountCell: "recordsCount",
                    ErrorsCountCell: "errorsCount",
                    ImportDateCell: "importDate",
                    LoadParamsButton: "loadParams",
                    LoadDataButton: "loadData",
                    InfoModal: "infoModal",
                    InfoModalHeader: "infoModalHeader",
                    InfoModalBody: "infoModalBody",
                    ParametersInfoTable: "parametersInfoTable"
                };
                this.Urls = {
                    LoadParams: "LoadImportParams",
                    LoadData: "LoadImportData",
                };
                this.initUIElements();
                this.initButtons();
            }
            initUIElements() {
                let self = this;
                $('#' + this.ElementIDs.DataTable).dataTable();
            }
            initButtons() {
                let self = this;
                let count = $('#' + self.ElementIDs.ImportsCount).val();
                for (let i = 0; i < count; i++) {
                    $('#' + self.ElementIDs.LoadParamsButton + i.toString())
                        .off('click').click(function () {
                        let importId = $('#' + self.ElementIDs.ImportIdCell + i.toString()).html();
                        $.ajax({
                            url: self.Urls.LoadParams,
                            type: 'GET',
                            cache: false,
                            async: true,
                            dataType: "html",
                            data: { importId: importId }
                        })
                            .done(function (result) {
                            $('#' + self.ElementIDs.InfoModalHeader).html('Параметри імпорту');
                            $('#' + self.ElementIDs.InfoModalBody).html(result);
                            $('#' + self.ElementIDs.ParametersInfoTable).dataTable();
                        }).fail(function (xhr) {
                            console.log('error : ' + xhr.status + ' - ' + xhr.statusText + ' - ' + xhr.responseText);
                        });
                    });
                    $('#' + self.ElementIDs.LoadDataButton + i.toString())
                        .off('click').click(function () {
                        let importId = $('#' + self.ElementIDs.ImportIdCell + i.toString()).html();
                        $.ajax({
                            url: self.Urls.LoadData,
                            type: 'GET',
                            cache: false,
                            async: true,
                            dataType: "html",
                            data: { importId: importId }
                        })
                            .done(function (result) {
                            $('#' + self.ElementIDs.InfoModalHeader).html('Дані імпорту');
                            $('#' + self.ElementIDs.InfoModalBody).html(result);
                            $('#' + self.ElementIDs.ParametersInfoTable).dataTable();
                        }).fail(function (xhr) {
                            console.log('error : ' + xhr.status + ' - ' + xhr.statusText + ' - ' + xhr.responseText);
                        });
                    });
                }
            }
        }
        Import.importHistory = new ImportHistoryService();
    })(Import = EasyDataAnalyzer.Import || (EasyDataAnalyzer.Import = {}));
})(EasyDataAnalyzer || (EasyDataAnalyzer = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1wb3J0SGlzdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL1NjcmlwdHMvaW1wb3J0SGlzdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLFFBQVEsQ0FBQztBQUVoQixJQUFVLGdCQUFnQixDQTJGekI7QUEzRkQsV0FBVSxnQkFBZ0I7SUFBQyxJQUFBLE1BQU0sQ0EyRmhDO0lBM0YwQixXQUFBLE1BQU07UUFFN0IsTUFBTSxvQkFBb0I7WUE0QnRCO2dCQTFCUSxlQUFVLEdBQUc7b0JBRWpCLFlBQVksRUFBRSxlQUFlO29CQUM3QixTQUFTLEVBQUUsd0JBQXdCO29CQUVuQyxZQUFZLEVBQUUsUUFBUTtvQkFDdEIsWUFBWSxFQUFFLFVBQVU7b0JBQ3hCLGdCQUFnQixFQUFFLGNBQWM7b0JBQ2hDLGVBQWUsRUFBRSxhQUFhO29CQUM5QixjQUFjLEVBQUUsWUFBWTtvQkFFNUIsZ0JBQWdCLEVBQUUsWUFBWTtvQkFDOUIsY0FBYyxFQUFFLFVBQVU7b0JBRTFCLFNBQVMsRUFBRSxXQUFXO29CQUN0QixlQUFlLEVBQUUsaUJBQWlCO29CQUNsQyxhQUFhLEVBQUUsZUFBZTtvQkFFOUIsbUJBQW1CLEVBQUUscUJBQXFCO2lCQUM3QyxDQUFDO2dCQUVNLFNBQUksR0FBRztvQkFDWCxVQUFVLEVBQUUsa0JBQWtCO29CQUM5QixRQUFRLEVBQUUsZ0JBQWdCO2lCQUM3QixDQUFDO2dCQUdFLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztnQkFDdEIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ3ZCLENBQUM7WUFFTyxjQUFjO2dCQUNsQixJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7Z0JBRWhCLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNuRCxDQUFDO1lBRU8sV0FBVztnQkFDZixJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7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bUIsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO3dCQUM3RCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHOzRCQUNqQixPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsVUFBVSxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7d0JBQzdGLENBQUMsQ0FBQyxDQUFDO29CQUNYLENBQUMsQ0FBQyxDQUFDO2lCQUNWO1lBRUwsQ0FBQztTQUNKO1FBRVUsb0JBQWEsR0FBRyxJQUFJLG9CQUFvQixFQUFFLENBQUM7SUFDMUQsQ0FBQyxFQTNGMEIsTUFBTSxHQUFOLHVCQUFNLEtBQU4sdUJBQU0sUUEyRmhDO0FBQUQsQ0FBQyxFQTNGUyxnQkFBZ0IsS0FBaEIsZ0JBQWdCLFFBMkZ6QiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgJ2pxdWVyeSc7XHJcblxyXG5uYW1lc3BhY2UgRWFzeURhdGFBbmFseXplci5JbXBvcnQge1xyXG5cclxuICAgIGNsYXNzIEltcG9ydEhpc3RvcnlTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBFbGVtZW50SURzID0ge1xyXG5cclxuICAgICAgICAgICAgSW1wb3J0c0NvdW50OiBcIkltcG9ydHNfQ291bnRcIixcclxuICAgICAgICAgICAgRGF0YVRhYmxlOiBcImltcG9ydEhpc3RvcnlEYXRhVGFibGVcIixcclxuXHJcbiAgICAgICAgICAgIEltcG9ydElkQ2VsbDogXCJpbXBvcnRcIixcclxuICAgICAgICAgICAgRmlsZU5hbWVDZWxsOiBcImZpbGVOYW1lXCIsXHJcbiAgICAgICAgICAgIFJlY29yZHNDb3VudENlbGw6IFwicmVjb3Jkc0NvdW50XCIsXHJcbiAgICAgICAgICAgIEVycm9yc0NvdW50Q2VsbDogXCJlcnJvcnNDb3VudFwiLFxyXG4gICAgICAgICAgICBJbXBvcnREYXRlQ2VsbDogXCJpbXBvcnREYXRlXCIsXHJcblxyXG4gICAgICAgICAgICBMb2FkUGFyYW1zQnV0dG9uOiBcImxvYWRQYXJhbXNcIixcclxuICAgICAgICAgICAgTG9hZERhdGFCdXR0b246IFwibG9hZERhdGFcIixcclxuXHJcbiAgICAgICAgICAgIEluZm9Nb2RhbDogXCJpbmZvTW9kYWxcIixcclxuICAgICAgICAgICAgSW5mb01vZGFsSGVhZGVyOiBcImluZm9Nb2RhbEhlYWRlclwiLFxyXG4gICAgICAgICAgICBJbmZvTW9kYWxCb2R5OiBcImluZm9Nb2RhbEJvZHlcIixcclxuXHJcbiAgICAgICAgICAgIFBhcmFtZXRlcnNJbmZvVGFibGU6IFwicGFyYW1ldGVyc0luZm9UYWJsZVwiXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBVcmxzID0ge1xyXG4gICAgICAgICAgICBMb2FkUGFyYW1zOiBcIkxvYWRJbXBvcnRQYXJhbXNcIixcclxuICAgICAgICAgICAgTG9hZERhdGE6IFwiTG9hZEltcG9ydERhdGFcIixcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0VUlFbGVtZW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRCdXR0b25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRVSUVsZW1lbnRzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAkKCcjJyArIHRoaXMuRWxlbWVudElEcy5EYXRhVGFibGUpLmRhdGFUYWJsZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0QnV0dG9ucygpIHtcclxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBsZXQgY291bnQgPSA8bnVtYmVyPiQoJyMnICsgc2VsZi5FbGVtZW50SURzLkltcG9ydHNDb3VudCkudmFsKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICQoJyMnICsgc2VsZi5FbGVtZW50SURzLkxvYWRQYXJhbXNCdXR0b24gKyBpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9mZignY2xpY2snKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbXBvcnRJZCA9ICQoJyMnICsgc2VsZi5FbGVtZW50SURzLkltcG9ydElkQ2VsbCArIGkudG9TdHJpbmcoKSkuaHRtbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzZWxmLlVybHMuTG9hZFBhcmFtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJodG1sXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGltcG9ydElkOiBpbXBvcnRJZCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBzZWxmLkVsZW1lbnRJRHMuSW5mb01vZGFsSGVhZGVyKS5odG1sKCfQn9Cw0YDQsNC80LXRgtGA0Lgg0ZbQvNC/0L7RgNGC0YMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjJyArIHNlbGYuRWxlbWVudElEcy5JbmZvTW9kYWxCb2R5KS5odG1sKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBzZWxmLkVsZW1lbnRJRHMuUGFyYW1ldGVyc0luZm9UYWJsZSkuZGF0YVRhYmxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uICh4aHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgOiAnICsgeGhyLnN0YXR1cyArICcgLSAnICsgeGhyLnN0YXR1c1RleHQgKyAnIC0gJyArIHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCgnIycgKyBzZWxmLkVsZW1lbnRJRHMuTG9hZERhdGFCdXR0b24gKyBpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9mZignY2xpY2snKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbXBvcnRJZCA9ICQoJyMnICsgc2VsZi5FbGVtZW50SURzLkltcG9ydElkQ2VsbCArIGkudG9TdHJpbmcoKSkuaHRtbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzZWxmLlVybHMuTG9hZERhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBpbXBvcnRJZDogaW1wb3J0SWQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyMnICsgc2VsZi5FbGVtZW50SURzLkluZm9Nb2RhbEhlYWRlcikuaHRtbCgn0JTQsNC90ZYg0ZbQvNC/0L7RgNGC0YMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjJyArIHNlbGYuRWxlbWVudElEcy5JbmZvTW9kYWxCb2R5KS5odG1sKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBzZWxmLkVsZW1lbnRJRHMuUGFyYW1ldGVyc0luZm9UYWJsZSkuZGF0YVRhYmxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uICh4aHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgOiAnICsgeGhyLnN0YXR1cyArICcgLSAnICsgeGhyLnN0YXR1c1RleHQgKyAnIC0gJyArIHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBsZXQgaW1wb3J0SGlzdG9yeSA9IG5ldyBJbXBvcnRIaXN0b3J5U2VydmljZSgpO1xyXG59Il19